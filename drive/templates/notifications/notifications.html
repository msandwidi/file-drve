{% extends 'base.html' %}

{% block title %}Sahel Box | Mes Notifications{% endblock %}

{% block content %}
<h1 class="text-xl md:text-2xl lg:text-3xl font-bold mb-4 text-[#027991]">Notifications</h1>

<div class="grid md:grid-cols-[3fr_1fr] sm:grid-cols-1 gap-2 mt-4">
    <div>
        <table class="border-b border-gray-300 w-full" id="file-table">
            <thead class="bg-gray-200">
                <tr>
                    <th class="px-4 py-2 text-left text-md text-gray-600 font-semibold">
                        <span>Mes Notifications Récentes</span>
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white">

                {% for notif in notifications %}
                <tr class="shadow shadow-sm group hover:bg-gray-50 hover:text-[#027991]">
                    <td class="px-4 py-2 text-md">
                        <a href="{% url 'my-notifications' %}?notification={{notif.id}}"
                            class="text-[#027991] hover:text-[#016073] shrink-0 {% if not notif.is_read %}font-semibold{% endif %}">
                            {{notif.title}}</a>
                        <p class="text-sm text-gray-500">{{notif.created_at}}</p>
                    </td>
                </tr>
                {% endfor %}

            </tbody>
        </table>

        {% if notifications %}
        <div class="mt-4 flex gap-2">
            {% if notifications.has_previous %}
            <a href="?page={{ notifications.previous_page_number }}#file-table"
                class="px-2 py-1 mr-3 border border-gray-200 text-gray-600 text-sm">Page Précédente</a>
            {% endif %}

            <span class="mr-3 py-1 text-gray-600 text-sm ">Page {{ notifications.number }} sur
                {{notifications.paginator.num_pages}}</span>

            {% if notifications.has_next %}
            <a href="?page={{ notifications.next_page_number }}#file-table"
                class="px-2 py-1 border border-gray-200 text-gray-600 text-sm">Page Suivante</a>
            {% endif %}
        </div>
        {% else %}
        <div class="flex items-start p-4 bg-yellow-100 border border-yellow-300 text-yellow-800 rounded-lg space-x-3 mt-2"
            role="alert">
            <div class="text-sm">
                <p>Vous n'avez aucune notification</p>
            </div>
        </div>
        {% endif %}

    </div>

    <div id="right-pane">
        {% if notification %}
        <div id="notification-details" class="mb-4">
            <table class="min-w-full border-b border-gray-300">
                <thead class="bg-[#ffd500] hover:bg-[#F5CC00]">
                    <tr>
                        <th class="px-2 py-1 text-left text-sm font-semibold border-l-2 border-gray-200">
                            <span>{{notification.title}}</span>
                        </th>
                    </tr>
                </thead>
                <tbody class="bg-white">

                    <tr class="shadow shadow-sm group">
                        <td class="px-2 py-1 text-sm text-gray-600">
                            <div class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="h-4 w-4 shrink-0">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0" />
                                </svg>
                                <span>{{ notification.title }}</span>
                            </div>
                        </td>
                    </tr>

                    <tr class="shadow shadow-sm group">
                        <td class="px-2 py-1 text-sm text-gray-600">
                            <div class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="h-4 w-4 shrink-0">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
                                </svg>
                                <span>{{ notification.description }}</span>
                            </div>
                        </td>
                    </tr>

                    {% if notification.file %}
                    <tr class="shadow shadow-sm group">
                        <td class="px-2 py-1 text-sm text-gray-600">
                            <div class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="h-4 w-4 shrink-0">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                                </svg>

                                <a href="{% url 'file-details' notification.file.slug %}" class="text-[#027991]">{{ notification.file.name }}</a>
                            </div>
                        </td>
                    </tr>
                    {% endif %}

                    {% if notification.folder %}
                    <tr class="shadow shadow-sm group">
                        <td class="px-2 py-1 text-sm text-gray-600">
                            <div class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="h-4 w-4 shrink-0">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z" />
                                </svg>

                                <a href="{% url 'my-box' %}?dossier={{notification.folder.slug}}" class="text-[#027991]">{{ notification.folder.name }}</a>
                            </div>
                        </td>
                    </tr>
                    {% endif %}

                    <tr class="shadow shadow-sm group">
                        <td class="px-2 py-1 text-sm text-gray-600">
                            <div class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="h-4 w-4 shrink-0">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                </svg>

                                <span>{{ notification.created_at }}</span>
                            </div>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
        {% endif %}

    </div>
</div>

{% endblock %}